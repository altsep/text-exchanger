var Y=Object.defineProperty;var V=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var B=(s,r,a)=>r in s?Y(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,w=(s,r)=>{for(var a in r||(r={}))K.call(r,a)&&B(s,a,r[a]);if(V)for(var a of V(r))Q.call(r,a)&&B(s,a,r[a]);return s};import{u as X,R as e,a as Z,N as q,b as ee,L as H,c as te,d as j,e as ne,B as re}from"./vendor.696df697.js";const se=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}};se();const O="p-4 m-3 rounded-sm font-bold text-base font-mono",A="underline hovered:no-underline",R="items-center justify-center text-lg w-full max-w-5xl resize-none my-3 p-4",W="text-base font-mono cursor-pointer children:py-2 children:px-4 lg:children:py-0 lg:children:px-1 text-right",F="text-base font-mono",I={"black on white":{default:"text-gray-900 bg-gray-50 text-2xl",btn:`text-gray-50 bg-gray-900 hover:bg-gray-400 ${O}`,anchor:`text-gray-600 visited:text-amber-800 ${A}`,userText:`bg-gray-100 border-gray-600 ${R}`,system:`text-gray-400 ${F}`,dropdown:`text-gray-400 children:bg-gray-50 hover:children:bg-gray-200 ${W}`},"white on gray":{default:"text-gray-50 bg-gray-500 text-2xl",btn:`text-gray-500 bg-gray-50 hover:bg-gray-200 ${O}`,anchor:`text-gray-400 visited:text-amber-600 ${A}`,userText:`placeholder:text-gray-300 bg-gray-400 border-gray-600 ${R}`,system:`text-gray-300 ${F}`,dropdown:`text-gray-300 children:bg-gray-500 hover:children:bg-gray-50 ${W}`},"amber on blue":{default:"text-amber-300 bg-blue-900 text-2xl",btn:`text-blue-800 bg-amber-300 hover:bg-amber-500 ${O}`,anchor:`text-amber-600 visited:text-amber-800 ${A}`,userText:`bg-blue-300/10 border-amber-800 ${R}`,system:`text-gray-400 ${F}`,dropdown:`text-gray-400 children:bg-blue-900 hover:children:bg-amber-300 ${W}`}},z=s=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s);const r=I[s].default.split(" "),a=document.querySelector("body");if(a){const n=a.classList;if(n.length>0)for(let t=0;t<r.length;t++)n.replace(n[t],r[t]);else for(const t of r)n.add(t)}};var ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",themes:I,defineTheme:z});(()=>{const s=localStorage.getItem("theme");z(s!==null?s:"black on white")})();const oe="modulepreload",G={},le="/",x=function(r,a){return!a||a.length===0?r():Promise.all(a.map(n=>{if(n=`${le}${n}`,n in G)return;G[n]=!0;const t=n.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const c=document.createElement("link");if(c.rel=t?"stylesheet":oe,t||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),t)return new Promise((u,l)=>{c.addEventListener("load",u),c.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>r())};function ce(){const s=X({from:{opacity:0},to:{opacity:1},config:{duration:250}});return e.useEffect(()=>{const r=setTimeout(()=>sessionStorage.setItem("descIsFaded","true"),250);return()=>clearTimeout(r)},[s]),e.createElement(Z.div,{className:"flex flex-col items-center w-full max-w-lg",style:sessionStorage.getItem("descIsFaded")!=="true"?s:void 0},e.createElement("p",{className:"curs indent-2"},'This app allows to exchange fragments of text. Press "Generate" to generate a link that could be then sent to another person. Paste the text you wanted to share and press send. The other person will have an option to share their piece of text as well. On press you will be redirected, link will be copied to clipboard. Page will be removed after one week of inactivity.'),e.createElement("p",{className:"curs"},"Have fun!"))}function ie(s){const[r,a]=e.useState();return e.useEffect(()=>{const n=localStorage.getItem("theme");n&&a(I[n])},[]),e.createElement(ue,{value:{theme:r,setTheme:a}},s.children)}const J=e.createContext({theme:I["black on white"],setTheme:()=>{}}),{Provider:ue,Consumer:_e}=J,_=()=>e.useContext(J);function me(){const{theme:s}=_();return e.createElement("div",{className:`${s&&s.system}  absolute bottom-0 left-1/2 -translate-x-1/2 p-3 text-xs`},"Reach me\xA0",e.createElement("a",{className:"foot-link",href:"https://altsep.vercel.app/",target:"_blank",rel:"noreferrer"},"here"))}function de(s){const{pagesCreated:r,setPagesCreated:a,setWarningDisplay:n}=s,{theme:t}=_(),[o,c]=e.useState(!1),[u,l]=e.useState(""),[m,b]=e.useState("Generate"),E=()=>{if(r.length<100){b("Working...");const p=document.cookie.split("=")[1];x(()=>import("./gen-str.3e3fc5d6.js"),[]).then(({genAlphanumStr:d})=>{const g=d();l(g);const y={pageName:g,info:{creator:p,date:Date.now()}};x(()=>import("./requests.fae15434.js"),[]).then(({addPage:S})=>{S(y).then(()=>{c(!0),a(C=>[...C,g])})}).catch(S=>console.error(S));const v=location.href+g;navigator.clipboard.writeText(v)}).catch(d=>console.error(d))}else n("flex")};return e.createElement(e.Fragment,null,e.createElement("button",{className:t&&t.btn,onClick:()=>{E()}},m),o&&e.createElement(q,{to:`/${u}`,replace:!0}))}function fe(s){const{currentPath:r,userId:a,setPageWasDeleted:n,setPagesCreated:t}=s,{theme:o}=_(),c=()=>{x(()=>import("./requests.fae15434.js"),[]).then(({removePage:u,getCreatorPages:l})=>{u(r).then(()=>l(a).then(m=>{m&&t(JSON.parse(m))}))}),n(!0)};return e.createElement("button",{className:o&&o.btn,onClick:c},"Remove this page")}function ge(s){const{isCreator:r,creatorText:a,guestText:n,handleChange:t,theme:o,gotText:c}=s,u=()=>{const l=document.querySelector("textarea");l&&(l.value.length===0?l.style.height="60px":(l.style.height="auto",l.style.height=l.scrollHeight+"px"))};return e.useEffect(()=>{const l=document.querySelector("textarea");l&&(u(),l.selectionStart=l.value.length)},[c]),e.useEffect(()=>{const l=document.querySelector("textarea");return l&&l.addEventListener("input",u),window.addEventListener("resize",u),()=>{l&&l.removeEventListener("input",u),window.removeEventListener("resize",u)}},[c]),e.createElement("div",{className:"flex flex-col items-center justify-center w-full"},e.createElement("h1",{className:"curs"},"Edit your text"),e.createElement("textarea",{className:`${o&&o.userText} shadow-inner shadow-black/25 placeholder:text-base placeholder:font-mono overflow-y-hidden resize-none focus:outline-none`,placeholder:c?"Enter text here...":"Getting data...",value:r?a:n,onChange:t,autoFocus:!0}))}function he(s){const{isCreator:r,textElementType:a,creatorText:n,guestText:t,theme:o}=s;return e.createElement("div",{className:"flex flex-col items-center justify-center w-full"},e.createElement("h1",{className:"curs"},r?"Guest's text":"Creator's text"),e.createElement("div",{className:`${o&&o.userText} ${a} font-sans whitespace-pre-line break-words`},r?t||e.createElement("p",{className:o&&o.system},"Waiting for guest to send data..."):n||e.createElement("p",{className:o&&o.system},"Waiting for creator to send data...")))}function M(s,r){const[a,n]=e.useState(r||"hidden"),[t,o]=e.useState("opacity-0"),{theme:c}=_();return{warning:e.createElement("div",{className:`${c&&c.system} ${a} flex-row justify-center text-center hover:opacity-60 cursor-pointer w-full`,title:"Hide",onClick:()=>n("hidden"),onMouseEnter:()=>o("opacity-60"),onMouseLeave:()=>o("opacity-0")},e.createElement("p",null,s),"\xA0",e.createElement("button",{className:t},"x")),warningDisplay:a,setWarningDisplay:n}}function pe(s){const{currentPath:r,userId:a,isCreator:n,date:t,setPageWasDeleted:o,setPagesCreated:c,setExists:u}=s,{theme:l}=_(),[m,b]=e.useState("default"),[E,p]=e.useState(!1),[d,g]=e.useState(""),[y,v]=e.useState(""),S=i=>n?g(i.target.value):v(i.target.value),C=()=>{x(()=>import("./requests.fae15434.js"),[]).then(({sendText:i})=>{i({pageName:r,isCreator:n,text:n?d:y}).then(h=>h&&u(!1))})};e.useEffect(()=>{x(()=>import("./requests.fae15434.js"),[]).then(({getText:i})=>i(r).then(h=>{if(h){const{creatorData:f,guestData:U}=JSON.parse(h);g(f),v(U)}}).finally(()=>p(!0)))},[]),e.useEffect(()=>{let i;return x(()=>import("./requests.fae15434.js"),[]).then(({getTextOther:h})=>{i=setInterval(()=>h({pageName:r,isCreator:n}).then(f=>{if(f){if(f.includes(`"err": "Couldn't find data"`))throw Error(JSON.parse(f).err);n?f!==y&&v(f):f!==d&&g(f)}}).catch(f=>{console.error(f.message),u(!1)}),3e3)}),()=>clearInterval(i)},[]);const L=()=>b(m==="default"?"other":"default"),T={isCreator:n,textElementType:m,creatorText:d,guestText:y,handleChange:S,theme:l,gotText:E},N={currentPath:r,userId:a,setPageWasDeleted:o,setPagesCreated:c},{warning:k,warningDisplay:$}=M("! Information posted is not secure and accessible to anyone visiting the page. Be mindful of sending any sensitive data.",localStorage.getItem("exchangeWarningDisplay")||"flex");e.useEffect(()=>{localStorage.setItem("exchangeWarningDisplay",$)},[$]);const[D,P]=e.useState("Select all");return e.useEffect(()=>{const i=()=>{const h=window.getSelection();h&&(h.toString().length>0?P("Delete selected"):P("Select all"))};return document.addEventListener("selectionchange",i),()=>{document.removeEventListener("selectionchange",i)}},[E]),e.createElement(e.Fragment,null,document.cookie?e.createElement("div",{className:"flex flex-col items-center"},k,e.createElement("div",{className:"flex flex-row flex-wrap justify-center mb-3"},m==="default"&&e.createElement("button",{className:`${l&&l.btn} flex flex-row items-center`,onClick:C},e.createElement("p",null,"Send"),"\xA0",e.createElement("p",{className:"text-xs"},"(128kb max)")),m==="default"&&(n?d.length>0:y.length>0)&&e.createElement("button",{className:`${l&&l.btn} ${d.length===0&&"hidden"}`,onClick:()=>{const i=document.querySelector("textarea"),h=window.getSelection();i&&h&&h.toString().length>0?(n?g(f=>f.replace(h.toString(),"")):v(f=>f.replace(h.toString(),"")),i.focus(),setTimeout(()=>{i.value.length>0?(i.style.height="auto",i.style.height=i.scrollHeight+"px"):i.style.height="60px"},0)):(i.focus(),i.setSelectionRange(0,i.value.length))}},D),n&&e.createElement(fe,w({},N)),e.createElement("button",{className:l&&l.btn,onClick:L},m==="default"?n?"Show guest's text":"Show creator's text":"Show your text")),m==="default"?e.createElement(ge,w({},T)):e.createElement(he,w({},T)),e.createElement("div",{className:`${l&&l.system} p-3 text-xs flex flex-col items-center`},e.createElement("p",null,"Page created"),e.createElement("p",null,t))):e.createElement("p",null,"Can't identify user! Please enable cookies for this site."))}function xe(s){const{userId:r,setPagesCreated:a}=s,[n,t]=e.useState(!1),{theme:o}=_(),[c,u]=e.useState(3),{p:l}=ee();e.useEffect(()=>{l&&b(l)},[]);const[m,b]=e.useState("");e.useEffect(()=>{const N=setInterval(()=>n&&u(k=>k-1),1e3);return()=>clearInterval(N)},[n]);const[E,p]=e.useState(!0),[d,g]=e.useState(!0),[y,v]=e.useState({creator:"",date:""}),[S,C]=e.useState(!1);e.useEffect(()=>{m&&x(()=>import("./requests.fae15434.js"),[]).then(({getInfo:N,updateInfo:k})=>N(m).then($=>{if($){const D=JSON.parse($);if(D.err)throw Error(D.err);{C(!0);const{creator:P,date:i}=D,h={dateStyle:"medium",timeStyle:"medium"},f=new Date(i).toLocaleString("en-US",h);v({creator:P,date:f}),k({pageName:m,info:{creator:P,date:Date.now()}}),P!==r&&p(!1)}}})).catch(N=>console.error(N.message)).finally(()=>g(!1))},[m]);const L={currentPath:m,userId:r,isCreator:E,date:y.date,setPageWasDeleted:t,setPagesCreated:a,setExists:C},T=`${o&&o.system} m-2 mb-4`;return e.createElement(e.Fragment,null,e.createElement("div",{className:`${T} flex flex-row justify-between`},e.createElement(H,{to:"/"},"Return to home page"),e.createElement("p",null,S&&m)),/^\w{6}$/.test(m)&&d?e.createElement("p",{className:T},"Getting data..."):S?n?e.createElement("div",{className:T},e.createElement("p",null,"Page was deleted. You will be redirected in ",c," seconds."),c===0&&e.createElement(q,{to:"/",replace:!0})):e.createElement(pe,w({},L)):e.createElement("p",{className:T},"Page not found."))}function Ee(s){const{gotPages:r,pagesCreated:a}=s,{theme:n}=_();return e.useEffect(()=>{const t=document.querySelector(".pages");if(t){const{scrollHeight:o,clientHeight:c,style:u}=t;o>c?u.overflowY="scroll":u.overflowY="auto"}},[r,a]),e.createElement("div",{className:"max-h-min"},r?a.length>0?e.createElement("div",{className:`pages ${n&&n.system} flex flex-row flex-wrap max-w-lg max-h-32`},e.createElement("p",null,"your pages:\xA0"),a.map(t=>e.createElement("div",{key:`link to ${t}`},e.createElement(H,{to:`/${t}`},t),a.length>1&&a.indexOf(t)!==a.length-1&&e.createElement(e.Fragment,null,",\xA0")))):e.createElement(e.Fragment,null,"\xA0"):e.createElement("p",{className:n&&n.system},"Getting data..."))}function ye(){const[s,r]=e.useState(!1),{theme:a,setTheme:n}=_(),t=Object.keys(I);return e.createElement("div",{className:`${a&&a.dropdown} absolute top-0 right-0 z-10`},s?t.map(o=>e.createElement("p",{key:o,onClick:()=>{x(()=>Promise.resolve().then(function(){return ae}),void 0).then(({defineTheme:c})=>c(o)),n(I[o]),r(!1)}},o)):e.createElement("p",{onClick:()=>{r(!0)}},"theme"))}function be(){const[s,r]=e.useState(""),[a,n]=e.useState(!1),[t,o]=e.useState([]);e.useEffect(()=>{const E=document.cookie.split("=")[1];E?(r(E),n(!1),x(()=>import("./requests.fae15434.js"),[]).then(({getCreatorPages:p})=>p(E).then(d=>{if(d){const g=JSON.parse(d);typeof g=="object"?(o(g),n(!0)):console.error(d)}})).catch(p=>console.log(p))):x(()=>import("./gen-str.3e3fc5d6.js"),[]).then(({genAlphanumStr:p})=>{const d=p(32),g="user-id="+d,y=";max-age=2592000;secure;samesite=strict";document.cookie=g+y,r(d)}).catch(p=>console.error(p))},[]);const{warning:c,setWarningDisplay:u}=M("! Cannot create more than 100 pages"),l={pagesCreated:t,setPagesCreated:o,setWarningDisplay:u},m={userId:s,pagesCreated:t,setPagesCreated:o},b={userId:s,pagesCreated:t,setPagesCreated:o,gotPages:a};return e.createElement(te,null,e.createElement(j,{path:"/",element:e.createElement(e.Fragment,null,e.createElement(ye,null),e.createElement("div",{className:"flex flex-col items-center w-full absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 px-4 children:mb-4"},e.createElement(ce,null),e.createElement("div",{className:"flex flex-row flex-wrap justify-center"},e.createElement(de,w({},l))),c,e.createElement(Ee,w({},b))),e.createElement(me,null))}),e.createElement(j,{path:":p",element:e.createElement(xe,w({},m))}))}const ve=s=>{s&&s instanceof Function&&x(()=>import("./web-vitals.a2d693e8.js"),[]).then(({getCLS:r,getFID:a,getFCP:n,getLCP:t,getTTFB:o})=>{r(s),a(s),n(s),t(s),o(s)})};ne.render(e.createElement(e.StrictMode,null,e.createElement(re,null,e.createElement(ie,null,e.createElement(be,null)))),document.getElementById("root"));ve();
