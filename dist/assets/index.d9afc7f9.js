var Y=Object.defineProperty;var B=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var G=(s,n,a)=>n in s?Y(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,p=(s,n)=>{for(var a in n||(n={}))K.call(n,a)&&G(s,a,n[a]);if(B)for(var a of B(n))Q.call(n,a)&&G(s,a,n[a]);return s};import{u as X,R as e,a as Z,b as ee,L as H,N as z,c as te,d as j,e as ne,B as re}from"./vendor.696df697.js";const se=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}};se();const O="p-4 m-3 rounded-sm font-bold text-base font-mono",A="underline hovered:no-underline",R="items-center justify-center text-lg w-full max-w-5xl resize-none my-3 p-4",W="text-base font-mono cursor-pointer children:py-2 children:px-4 lg:children:py-0 lg:children:px-1 text-right",F="text-base font-mono",k={"black on white":{default:"text-gray-900 bg-gray-50 text-2xl",btn:`text-gray-50 bg-gray-900 hover:bg-gray-400 ${O}`,anchor:`text-gray-600 visited:text-amber-800 ${A}`,userText:`bg-gray-100 border-gray-600 ${R}`,system:`text-gray-400 ${F}`,dropdown:`text-gray-400 children:bg-gray-50 hover:children:bg-gray-200 ${W}`},"white on gray":{default:"text-gray-50 bg-gray-500 text-2xl",btn:`text-gray-500 bg-gray-50 hover:bg-gray-200 ${O}`,anchor:`text-gray-400 visited:text-amber-600 ${A}`,userText:`placeholder:text-gray-300 bg-gray-400 border-gray-600 ${R}`,system:`text-gray-300 ${F}`,dropdown:`text-gray-300 children:bg-gray-500 hover:children:bg-gray-50 ${W}`},"amber on blue":{default:"text-amber-300 bg-blue-900 text-2xl",btn:`text-blue-800 bg-amber-300 hover:bg-amber-500 ${O}`,anchor:`text-amber-600 visited:text-amber-800 ${A}`,userText:`bg-blue-300/10 border-amber-800 ${R}`,system:`text-gray-400 ${F}`,dropdown:`text-gray-400 children:bg-blue-900 hover:children:bg-amber-300 ${W}`}},J=s=>{document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s);const n=k[s].default.split(" "),a=document.querySelector("body");if(a){const r=a.classList;if(r.length>0)for(let t=0;t<n.length;t++)r.replace(r[t],n[t]);else for(const t of n)r.add(t)}};var ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",themes:k,defineTheme:J});(()=>{const s=localStorage.getItem("theme");J(s!==null?s:"black on white")})();const oe="modulepreload",q={},le="/",x=function(n,a){return!a||a.length===0?n():Promise.all(a.map(r=>{if(r=`${le}${r}`,r in q)return;q[r]=!0;const t=r.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const c=document.createElement("link");if(c.rel=t?"stylesheet":oe,t||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),t)return new Promise((i,l)=>{c.addEventListener("load",i),c.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>n())};function ce(){const s=X({from:{opacity:0},to:{opacity:1},config:{duration:250}});return e.useEffect(()=>{const n=setTimeout(()=>sessionStorage.setItem("descIsFaded","true"),250);return()=>clearTimeout(n)},[s]),e.createElement(Z.div,{className:"flex flex-col items-center w-full max-w-lg",style:sessionStorage.getItem("descIsFaded")!=="true"?s:void 0},e.createElement("p",{className:"curs indent-2"},'This app allows to exchange fragments of text. Press "Generate" to generate a link that could be then sent to another person. Paste the text you wanted to share and press send. The other person will have an option to share their piece of text as well. On press you will be redirected, link will be copied to clipboard. Page will be removed after one week of inactivity.'),e.createElement("p",{className:"curs"},"Have fun!"))}function ie(s){const[n,a]=e.useState({default:"",btn:"",anchor:"",userText:"",system:"",dropdown:""});return e.useEffect(()=>{const r=localStorage.getItem("theme");r&&a(k[r])},[]),e.createElement(ue,{value:{theme:n,setTheme:a}},s.children)}const M=e.createContext({theme:k["black on white"],setTheme:()=>{}}),{Provider:ue,Consumer:Ce}=M,_=()=>e.useContext(M);function me(){const{theme:s}=_();return e.createElement("div",{className:`${s&&s.system}  absolute bottom-0 left-1/2 -translate-x-1/2 p-3 text-xs`},"Reach me\xA0",e.createElement("a",{className:"foot-link",href:"https://altsep.vercel.app/",target:"_blank",rel:"noreferrer"},"here"))}function de(s){const{theme:n,currentPath:a,userId:r,setPageWasDeleted:t,setPagesCreated:o}=s,c=()=>{x(()=>import("./requests.fae15434.js"),[]).then(({removePage:i,getCreatorPages:l})=>{i(a).then(()=>l(r).then(m=>{m&&o(JSON.parse(m))}))}),t(!0)};return e.createElement("button",{className:n.btn,onClick:c},"Remove this page")}function ge(s){const{theme:n,currentPath:a,isCreator:r,creatorText:t,guestText:o,setExists:c}=s,i=()=>{x(()=>import("./requests.fae15434.js"),[]).then(({sendText:l})=>{l({pageName:a,isCreator:r,text:r?t:o}).then(m=>m&&c(!1))})};return e.createElement("button",{className:`${n.btn} flex flex-row items-center`,onClick:i},e.createElement("p",null,"Send"),"\xA0",e.createElement("p",{className:"text-xs"},"(128kb max)"))}function fe(s){const{theme:n,isCreator:a,creatorText:r,guestText:t,setCreatorText:o,setGuestText:c,gotText:i}=s,l=()=>{const u=document.querySelector("textarea"),d=window.getSelection();u&&d&&d.toString().length>0?(a?o(g=>g.replace(d.toString(),"")):c(g=>g.replace(d.toString(),"")),u.focus(),setTimeout(()=>{u.value.length>0?(u.style.height="auto",u.style.height=u.scrollHeight+"px"):u.style.height="60px"},0)):(u.focus(),u.setSelectionRange(0,u.value.length))},[m,E]=e.useState("Select all");return e.useEffect(()=>{const u=()=>{const d=window.getSelection();d&&(d.toString().length>0?E("Delete selected"):E("Select all"))};return document.addEventListener("selectionchange",u),()=>{document.removeEventListener("selectionchange",u)}},[i]),e.createElement("button",{className:`${n.btn} ${a?r.length===0&&"hidden":t.length===0&&"hidden"}`,onClick:l},m)}function he(s){const{theme:n,isCreator:a,textElementType:r,setTextElementType:t}=s,o=()=>t(r==="default"?"other":"default");return e.createElement("button",{className:n.btn,onClick:o},r==="default"?a?"Show guest's text":"Show creator's text":"Show your text")}function pe(s){const{theme:n,isCreator:a,creatorText:r,guestText:t,handleChange:o,gotText:c}=s,i=()=>{const l=document.querySelector("textarea");l&&(l.value.length===0?l.style.height="60px":(l.style.height="auto",l.style.height=l.scrollHeight+"px"))};return e.useEffect(()=>{const l=document.querySelector("textarea");l&&(i(),l.selectionStart=l.value.length)},[c]),e.useEffect(()=>{const l=document.querySelector("textarea");return l&&l.addEventListener("input",i),window.addEventListener("resize",i),()=>{l&&l.removeEventListener("input",i),window.removeEventListener("resize",i)}},[c]),e.createElement("div",{className:"flex flex-col items-center justify-center w-full"},e.createElement("h1",{className:"curs"},"Edit your text"),e.createElement("textarea",{className:`${n.userText} shadow-inner shadow-black/25 placeholder:text-base placeholder:font-mono overflow-y-hidden resize-none focus:outline-none`,placeholder:c?"Enter text here...":"Getting data...",value:a?r:t,onChange:o,autoFocus:!0}))}function xe(s){const{theme:n,isCreator:a,textElementType:r,creatorText:t,guestText:o}=s;return e.createElement("div",{className:"flex flex-col items-center justify-center w-full"},e.createElement("h1",{className:"curs"},a?"Guest's text":"Creator's text"),e.createElement("div",{className:`${n.userText} ${r} font-sans whitespace-pre-line break-words`},a?o||e.createElement("p",{className:n&&n.system},"Waiting for guest to send data..."):t||e.createElement("p",{className:n&&n.system},"Waiting for creator to send data...")))}function U(s,n,a){const[r,t]=e.useState(n||"hidden"),[o,c]=e.useState("opacity-0"),{theme:i}=_();return{warning:e.createElement("div",{className:`${i&&i.system} ${r} flex-row justify-center text-center hover:opacity-60 cursor-pointer w-full ${a}`,title:"Hide",onClick:()=>t("hidden"),onMouseEnter:()=>c("opacity-60"),onMouseLeave:()=>c("opacity-0")},e.createElement("p",null,s),"\xA0",e.createElement("button",{className:o},"x")),warningDisplay:r,setWarningDisplay:t}}function Ee(s){const{currentPath:n,userId:a,isCreator:r,date:t,setPageWasDeleted:o,setPagesCreated:c,setExists:i}=s,{theme:l}=_(),[m,E]=e.useState("default"),[u,d]=e.useState(!1),[g,f]=e.useState(""),[y,b]=e.useState(""),v=h=>r?f(h.target.value):b(h.target.value);e.useEffect(()=>{x(()=>import("./requests.fae15434.js"),[]).then(({getText:h})=>h(n).then(N=>{if(N){const{creatorData:w,guestData:I}=JSON.parse(N);f(w),b(I)}}).finally(()=>d(!0)))},[]),e.useEffect(()=>{let h;return x(()=>import("./requests.fae15434.js"),[]).then(({getTextOther:N})=>{h=setInterval(()=>N({pageName:n,isCreator:r}).then(w=>{if(w){const{err:I,text:V}=JSON.parse(w);if(I)throw Error(I);r?b(V):f(V)}}).catch(w=>{console.error(w.message),i(!1)}),3e3)}),()=>clearInterval(h)},[]);const S={theme:l,isCreator:r,textElementType:m,creatorText:g,guestText:y,handleChange:v,gotText:u},D={theme:l,currentPath:n,userId:a,setPageWasDeleted:o,setPagesCreated:c},P={theme:l,currentPath:n,isCreator:r,creatorText:g,guestText:y,setExists:i},T={theme:l,isCreator:r,creatorText:g,guestText:y,setCreatorText:f,setGuestText:b,gotText:u},$={theme:l,isCreator:r,textElementType:m,setTextElementType:E},{warning:L,warningDisplay:C}=U("! Information posted is not secure and is accessible to anyone visiting the page. Take caution not to share any sensitive data.",localStorage.getItem("exchangeWarningDisplay")||"flex");return e.useEffect(()=>{localStorage.setItem("exchangeWarningDisplay",C)},[C]),e.createElement(e.Fragment,null,document.cookie?e.createElement("div",{className:"flex flex-col items-center"},L,e.createElement("div",{className:"m-3 w-full"},m==="default"?e.createElement(pe,p({},S)):e.createElement(xe,p({},S))),e.createElement("div",{className:"flex flex-row flex-wrap justify-center"},m==="default"&&e.createElement(e.Fragment,null,e.createElement(ge,p({},P)),e.createElement(fe,p({},T))),r&&e.createElement(de,p({},D)),e.createElement(he,p({},$))),e.createElement("div",{className:`${l&&l.system} p-3 text-xs flex flex-col items-center`},e.createElement("p",null,"Page created"),e.createElement("p",null,t))):e.createElement("p",null,"Can't identify user! Please enable cookies for this site."))}function ye(s){const{userId:n,setPagesCreated:a}=s,[r,t]=e.useState(!1),{theme:o}=_(),[c,i]=e.useState(3),{p:l}=ee();e.useEffect(()=>{l&&E(l)},[]);const[m,E]=e.useState("");e.useEffect(()=>{const T=setInterval(()=>r&&i($=>$-1),1e3);return()=>clearInterval(T)},[r]);const[u,d]=e.useState(!0),[g,f]=e.useState(!0),[y,b]=e.useState({creator:"",date:""}),[v,S]=e.useState(!1);e.useEffect(()=>{m&&x(()=>import("./requests.fae15434.js"),[]).then(({getInfo:T,updateInfo:$})=>T(m).then(L=>{if(L){const C=JSON.parse(L);if(C.err)throw Error(C.err);{S(!0);const{creator:h,date:N}=C,w={dateStyle:"medium",timeStyle:"medium"},I=new Date(N).toLocaleString("en-US",w);b({creator:h,date:I}),$({pageName:m,info:{creator:h,date:Date.now()}}),h!==n&&d(!1)}}})).catch(T=>console.error(T.message)).finally(()=>f(!1))},[m]);const D={currentPath:m,userId:n,isCreator:u,date:y.date,setPageWasDeleted:t,setPagesCreated:a,setExists:S},P=`${o&&o.system} m-2 mb-4`;return e.createElement(e.Fragment,null,e.createElement("div",{className:`${P} flex flex-row justify-between`},e.createElement(H,{to:"/"},"Return to home page"),e.createElement("p",null,v&&m)),/^\w{6}$/.test(m)&&g?e.createElement("p",{className:P},"Getting data..."):v?r?e.createElement("div",{className:P},e.createElement("p",null,"Page was deleted. You will be redirected in ",c," seconds."),c===0&&e.createElement(z,{to:"/",replace:!0})):e.createElement(Ee,p({},D)):e.createElement("p",{className:P},"Page not found."))}function be(s){const{gotPages:n,pagesCreated:a}=s,{theme:r}=_();return e.useEffect(()=>{const t=document.querySelector(".pages");if(t){const{scrollHeight:o,clientHeight:c,style:i}=t;o>c?i.overflowY="scroll":i.overflowY="auto"}},[n,a]),e.createElement("div",{className:"max-h-min"},n?a.length>0?e.createElement("div",{className:`pages ${r&&r.system} flex flex-row flex-wrap max-w-lg max-h-32`},e.createElement("p",null,"your pages:\xA0"),a.map(t=>e.createElement("div",{key:`link to ${t}`},e.createElement(H,{to:`/${t}`},t),a.length>1&&a.indexOf(t)!==a.length-1&&e.createElement(e.Fragment,null,",\xA0")))):e.createElement(e.Fragment,null,"\xA0"):e.createElement("p",{className:r&&r.system},"Getting data..."))}function ve(){const[s,n]=e.useState(!1),{theme:a,setTheme:r}=_(),t=Object.keys(k);return e.createElement("div",{className:`${a&&a.dropdown} absolute top-0 right-0 z-10`},s?t.map(o=>e.createElement("p",{key:o,onClick:()=>{x(()=>Promise.resolve().then(function(){return ae}),void 0).then(({defineTheme:c})=>c(o)),r(k[o]),n(!1)}},o)):e.createElement("p",{onClick:()=>{n(!0)}},"theme"))}function we(s){const{pagesCreated:n,setPagesCreated:a,setWarningDisplay:r}=s,{theme:t}=_(),[o,c]=e.useState(!1),[i,l]=e.useState(""),[m,E]=e.useState("Generate"),u=()=>{if(n.length<100){E("Working...");const d=document.cookie.split("=")[1];x(()=>import("./gen-str.3e3fc5d6.js"),[]).then(({genAlphanumStr:g})=>{const f=g();l(f);const y={pageName:f,info:{creator:d,date:Date.now()}};x(()=>import("./requests.fae15434.js"),[]).then(({addPage:v})=>{v(y).then(()=>{c(!0),a(S=>[...S,f])})}).catch(v=>console.error(v));const b=location.href+f;navigator.clipboard.writeText(b)}).catch(g=>console.error(g))}else r("flex")};return e.createElement(e.Fragment,null,e.createElement("button",{className:t&&t.btn,onClick:()=>{u()}},m),o&&e.createElement(z,{to:`/${i}`,replace:!0}))}function Se(){const[s,n]=e.useState(""),[a,r]=e.useState(!1),[t,o]=e.useState([]);e.useEffect(()=>{const u=document.cookie.split("=")[1];u?(n(u),r(!1),x(()=>import("./requests.fae15434.js"),[]).then(({getCreatorPages:d})=>d(u).then(g=>{if(g){const f=JSON.parse(g);if(f.err)throw Error(f.err);o(f)}})).catch(d=>console.warn(d.message)).finally(()=>r(!0))):x(()=>import("./gen-str.3e3fc5d6.js"),[]).then(({genAlphanumStr:d})=>{const g=d(32),f="user-id="+g,y=";max-age=2592000;secure;samesite=strict";document.cookie=f+y,n(g)}).catch(d=>console.error(d)).finally(()=>r(!0))},[]);const{warning:c,setWarningDisplay:i}=U("! Cannot create more than 100 pages"),l={pagesCreated:t,setPagesCreated:o,setWarningDisplay:i},m={userId:s,pagesCreated:t,setPagesCreated:o},E={userId:s,pagesCreated:t,setPagesCreated:o,gotPages:a};return e.createElement(te,null,e.createElement(j,{path:"/",element:e.createElement(e.Fragment,null,e.createElement(ve,null),e.createElement("div",{className:"flex flex-col items-center w-full absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 px-4 children:mb-4"},e.createElement(ce,null),e.createElement("div",{className:"flex flex-row flex-wrap justify-center"},e.createElement(we,p({},l))),c,e.createElement(be,p({},E))),e.createElement(me,null))}),e.createElement(j,{path:":p",element:e.createElement(ye,p({},m))}))}const Te=s=>{s&&s instanceof Function&&x(()=>import("./web-vitals.a2d693e8.js"),[]).then(({getCLS:n,getFID:a,getFCP:r,getLCP:t,getTTFB:o})=>{n(s),a(s),r(s),t(s),o(s)})};ne.render(e.createElement(e.StrictMode,null,e.createElement(re,null,e.createElement(ie,null,e.createElement(Se,null)))),document.getElementById("root"));Te();
